"use strict";(self.webpackChunkmessenger=self.webpackChunkmessenger||[]).push([[104],{853:function(e,n,r){r.d(n,{DR:function(){return v},FZ:function(){return m},Zd:function(){return f},aA:function(){return x},gm:function(){return Z},kt:function(){return w},zv:function(){return g}});var t,a=r(4165),s=r(5861),o=r(4569),u=r.n(o),i=r(8926),c=r(3893),l=r(4419),d=r(3912),p=r.n(d);u().defaults.baseURL="http://70.37.67.50/",u().defaults.headers.common["Access-Control-Allow-Origin"]="*",u().defaults.headers.common["Content-Type"]="application/json",u().defaults.headers.common.Authorization=localStorage.AUTH_TOKEN,u().interceptors.response.use((function(e){return e}),(function(e){var n,r;401===(null===(n=e.response)||void 0===n?void 0:n.status)?(i.Am.isActive(e.response.data.message)||i.Am.error(e.response.data.message,{toastId:e.response.data.message}),localStorage.AUTH_TOKEN&&(0,l.tb)()(c.Z.dispatch)):400===(null===(r=e.response)||void 0===r?void 0:r.status)&&(i.Am.isActive(e.response.data.message)||i.Am.error(e.response.data.message,{toastId:e.response.data.message}))}));var f=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.cancel("Operation canceled due to new request."),t=u().CancelToken.source(),e.next=4,u().get("api/users/search/"+n,{cancelToken:t.token}).then((function(e){return null===e||void 0===e?void 0:e.data})).catch((function(e){return console.log(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h=localStorage.fingerPrint?localStorage.fingerPrint:p().name+" "+p().os,m=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().get("api/users/current/info/"+h).then((function(e){return e.data})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().post("api/users/current/edit/image",{image:n},{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return 200===e.status&&i.Am.success("New profile picture uploaded!")})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().post("api/users/current/edit/background/"+h,{image:n},{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return 200===e.status&&i.Am.success("New background uploaded!")})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n,r,t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().put("api/users/current/edit",{name:n,email:r,password:t}).then((function(e){return 204===e.status&&i.Am.success("Profile changes uploaded!")})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,r,t){return e.apply(this,arguments)}}(),w=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().post("/api/authorization/signIn",{userName:n,password:r}).then((function(e){localStorage.AUTH_TOKEN="Bearer "+e.data.jwtToken,localStorage.AUTH_TOKEN&&(u().defaults.headers.common.Authorization="Bearer "+e.data.jwtToken)})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),Z=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n,r,t,s){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u().post("/api/authorization/signUp",{name:n,userName:r,email:t,password:s}).then((function(e){localStorage.AUTH_TOKEN="Bearer "+e.data.jwtToken,localStorage.AUTH_TOKEN&&(u().defaults.headers.common.Authorization="Bearer "+e.data.jwtToken)})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,r,t,a){return e.apply(this,arguments)}}()},5104:function(e,n,r){r.r(n);r(2791);var t=r(853),a=(r(3824),r(6646),r(5705)),s=r(3504),o=r(2797),u=r(6747),i=r(8096),c=r(9598),l=r(6151),d=r(9434),p=r(1763),f=r(1933),h=r(184);n.default=function(){var e=(0,d.I0)(),n=(0,f.useMutation)((function(e){var n=e.login,r=e.password;return(0,t.kt)(n,r)}),{onSuccess:function(){return e((0,p.r1)())}}),r=n.mutate,m=n.isLoading,g=o.Ry().shape({login:o.Z_("Invalid login format").required("Login is Required").max(20,"The length of the login should not exceed 20 characters!"),password:o.Z_().required("Password is Required").min(8,"Invalid password length")}),v=(0,a.TA)({initialValues:{login:"",password:""},validationSchema:g,onSubmit:function(e){r({login:e.login,password:e.password})}});return(0,h.jsxs)("div",{className:"Auth-Wrapper background-container",children:[(0,h.jsx)("div",{className:"stars"}),(0,h.jsx)("div",{className:"twinkling"}),(0,h.jsx)(u.Z,{className:"Custom-Box",children:(0,h.jsxs)("form",{onSubmit:v.handleSubmit,children:[(0,h.jsx)("h1",{className:"Auth-Header",children:"Sign-In"}),(0,h.jsx)(i.Z,{sx:{width:250},children:(0,h.jsx)(c.Z,{className:"Custom-TextField",sx:{margin:"15px 0"},variant:"outlined",id:"login",name:"login",label:"Login",value:v.values.login,onChange:v.handleChange,error:v.touched.login&&Boolean(v.errors.login),helperText:v.touched.login&&v.errors.login})}),(0,h.jsx)(i.Z,{sx:{width:250},children:(0,h.jsx)(c.Z,{className:"Custom-TextField",sx:{margin:"15px 0"},variant:"outlined",id:"password",label:"Password",type:"password",value:v.values.password,onChange:v.handleChange,error:v.touched.password&&Boolean(v.errors.password),helperText:v.touched.password&&v.errors.password})}),(0,h.jsx)(l.Z,{className:"Custom-Auth-Button",sx:{margin:"10px 0 20px 0"},variant:"contained",type:"submit",disabled:m,children:"Sign-In"})]})}),(0,h.jsxs)("div",{className:"Auth-link",children:[(0,h.jsx)("span",{children:"Don't have an account? "}),(0,h.jsx)(s.OL,{to:"/sign-up",children:"Sign-Up"})]})]})}},6747:function(e,n,r){r.d(n,{Z:function(){return w}});var t=r(7462),a=r(3366),s=r(2791),o=r(8182),u=r(594),i=r(104),c=r(2982),l=r(2466),d=r(6001),p=["sx"];function f(e){var n,r=e.sx,s=function(e){var n={systemProps:{},otherProps:{}};return Object.keys(e).forEach((function(r){d.Gc[r]?n.systemProps[r]=e[r]:n.otherProps[r]=e[r]})),n}((0,a.Z)(e,p)),o=s.systemProps,u=s.otherProps;return n=Array.isArray(r)?[o].concat((0,c.Z)(r)):"function"===typeof r?function(){var e=r.apply(void 0,arguments);return(0,l.P)(e)?(0,t.Z)({},o,e):o}:(0,t.Z)({},o,r),(0,t.Z)({},u,{sx:n})}var h=r(886),m=r(184),g=["className","component"];var v=r(5902),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.defaultTheme,r=e.defaultClassName,c=void 0===r?"MuiBox-root":r,l=e.generateClassName,d=e.styleFunctionSx,p=void 0===d?i.Z:d,v=(0,u.ZP)("div")(p),x=s.forwardRef((function(e,r){var s=(0,h.Z)(n),u=f(e),i=u.className,d=u.component,p=void 0===d?"div":d,x=(0,a.Z)(u,g);return(0,m.jsx)(v,(0,t.Z)({as:p,ref:r,className:(0,o.Z)(i,l?l(c):c),theme:s},x))}));return x}({defaultTheme:(0,r(7107).Z)(),defaultClassName:"MuiBox-root",generateClassName:v.Z.generate}),w=x},6646:function(){},3824:function(){}}]);
//# sourceMappingURL=104.c2cf3e27.chunk.js.map