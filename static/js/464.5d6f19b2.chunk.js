"use strict";(self.webpackChunkmessenger=self.webpackChunkmessenger||[]).push([[464],{853:function(e,n,r){r.d(n,{DR:function(){return x},FZ:function(){return f},Zd:function(){return p},aA:function(){return v},gm:function(){return Z},kt:function(){return w},zv:function(){return g}});var t,a=r(4165),s=r(5861),o=r(4569),i=r.n(o),u=r(8926),c=r(3893),l=r(4419),d=r(3912),m=r.n(d);i().defaults.baseURL="http://70.37.67.50/",i().defaults.headers.common["Access-Control-Allow-Origin"]="*",i().defaults.headers.common["Content-Type"]="application/json",i().defaults.headers.common.Authorization=localStorage.AUTH_TOKEN,i().interceptors.response.use((function(e){return e}),(function(e){var n,r;401===(null===(n=e.response)||void 0===n?void 0:n.status)?(u.Am.isActive(e.response.data.message)||u.Am.error(e.response.data.message,{toastId:e.response.data.message}),localStorage.AUTH_TOKEN&&(0,l.tb)()(c.Z.dispatch)):400===(null===(r=e.response)||void 0===r?void 0:r.status)&&(u.Am.isActive(e.response.data.message)||u.Am.error(e.response.data.message,{toastId:e.response.data.message}))}));var p=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.cancel("Operation canceled due to new request."),t=i().CancelToken.source(),e.next=4,i().get("api/users/search/"+n,{cancelToken:t.token}).then((function(e){return null===e||void 0===e?void 0:e.data})).catch((function(e){return console.log(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),h=localStorage.fingerPrint?localStorage.fingerPrint:m().name+" "+m().os,f=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i().get("api/users/current/info/"+h).then((function(e){return e.data})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i().post("api/users/current/edit/image",{image:n},{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return 200===e.status&&u.Am.success("New profile picture uploaded!")})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i().post("api/users/current/edit/background/"+h,{image:n},{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return 200===e.status&&u.Am.success("New background uploaded!")})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),v=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n,r,t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i().put("api/users/current/edit",{name:n,email:r,password:t}).then((function(e){return 204===e.status&&u.Am.success("Profile changes uploaded!")})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,r,t){return e.apply(this,arguments)}}(),w=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i().post("/api/authorization/signIn",{userName:n,password:r}).then((function(e){localStorage.AUTH_TOKEN="Bearer "+e.data.jwtToken,localStorage.AUTH_TOKEN&&(i().defaults.headers.common.Authorization="Bearer "+e.data.jwtToken)})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),Z=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n,r,t,s){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i().post("/api/authorization/signUp",{name:n,userName:r,email:t,password:s}).then((function(e){localStorage.AUTH_TOKEN="Bearer "+e.data.jwtToken,localStorage.AUTH_TOKEN&&(i().defaults.headers.common.Authorization="Bearer "+e.data.jwtToken)})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,r,t,a){return e.apply(this,arguments)}}()},1464:function(e,n,r){r.r(n);r(2791);var t=r(3504),a=r(853),s=(r(3824),r(6646),r(6747)),o=r(8096),i=r(9598),u=r(6151),c=r(2797),l=r(5705),d=r(1763),m=r(9434),p=r(1933),h=r(184);n.default=function(){var e=(0,m.I0)(),n=(0,p.useMutation)((function(e){var n=e.name,r=e.login,t=e.email,s=e.password;return(0,a.gm)(n,r,t,s)}),{onSuccess:function(){return e((0,d.r1)())}}),r=n.mutate,f=n.isLoading,g=c.Ry().shape({name:c.Z_("Invalid name format").required("Name is Required").max(20,"The length of the name should not exceed 20 characters!"),login:c.Z_("Invalid login format").required("Login is Required").max(20,"The length of the login should not exceed 20 characters!"),email:c.Z_("Invalid email format").email("Invalid email format").required("Email is Required"),password:c.Z_().required("Password is Required").min(8,"Invalid password length"),passwordConfirm:c.Z_().required("Confirm the password").min(8,"Invalid password length").oneOf([c.iH("password"),null],"Passwords must match")}),x=(0,l.TA)({initialValues:{name:"",login:"",email:"",password:"",passwordConfirm:""},validationSchema:g,onSubmit:function(e){r({name:e.name,login:e.login,email:e.email,password:e.password})}});return(0,h.jsxs)("div",{className:"Auth-Wrapper background-container",children:[(0,h.jsx)("div",{className:"stars"}),(0,h.jsx)("div",{className:"twinkling"}),(0,h.jsx)(s.Z,{className:"Custom-Box",children:(0,h.jsxs)("form",{onSubmit:x.handleSubmit,children:[(0,h.jsx)("h1",{className:"Auth-Header",children:"Sign-Up"}),(0,h.jsx)(o.Z,{sx:{width:250},children:(0,h.jsx)(i.Z,{className:"Custom-TextField",sx:{margin:"15px 0"},variant:"outlined",id:"name",name:"name",label:"Name",value:x.values.name,onChange:x.handleChange,error:x.touched.name&&Boolean(x.errors.name),helperText:x.touched.name&&x.errors.name})}),(0,h.jsx)(o.Z,{sx:{width:250},children:(0,h.jsx)(i.Z,{className:"Custom-TextField",sx:{margin:"15px 0"},variant:"outlined",id:"login",name:"login",label:"Login",value:x.values.login,onChange:x.handleChange,error:x.touched.login&&Boolean(x.errors.login),helperText:x.touched.login&&x.errors.login})}),(0,h.jsx)(o.Z,{sx:{width:250},children:(0,h.jsx)(i.Z,{className:"Custom-TextField",sx:{margin:"15px 0"},variant:"outlined",id:"email",name:"email",label:"Email",type:"email",value:x.values.email,onChange:x.handleChange,error:x.touched.email&&Boolean(x.errors.email),helperText:x.touched.email&&x.errors.email})}),(0,h.jsx)(o.Z,{sx:{width:250},children:(0,h.jsx)(i.Z,{className:"Custom-TextField",sx:{margin:"15px 0"},variant:"outlined",id:"password",label:"Password",type:"password",value:x.values.password,onChange:x.handleChange,error:x.touched.password&&Boolean(x.errors.password),helperText:x.touched.password&&x.errors.password})}),(0,h.jsx)(o.Z,{sx:{width:250},children:(0,h.jsx)(i.Z,{className:"Custom-TextField",sx:{margin:"15px 0"},variant:"outlined",id:"passwordConfirm",label:"Confirm Password",type:"password",value:x.values.passwordConfirm,onChange:x.handleChange,error:x.touched.passwordConfirm&&Boolean(x.errors.passwordConfirm),helperText:x.touched.passwordConfirm&&x.errors.passwordConfirm})}),(0,h.jsx)(u.Z,{className:"Custom-Auth-Button",sx:{margin:"10px 0 20px 0"},variant:"contained",type:"submit",disabled:f,children:"Sign-Up"})]})}),(0,h.jsxs)("div",{className:"Auth-link",children:[(0,h.jsx)("span",{children:"Already have an account? "}),(0,h.jsx)(t.OL,{to:"/login",children:"Sign-In"})]})]})}},6747:function(e,n,r){r.d(n,{Z:function(){return w}});var t=r(7462),a=r(3366),s=r(2791),o=r(8182),i=r(594),u=r(104),c=r(2982),l=r(2466),d=r(6001),m=["sx"];function p(e){var n,r=e.sx,s=function(e){var n={systemProps:{},otherProps:{}};return Object.keys(e).forEach((function(r){d.Gc[r]?n.systemProps[r]=e[r]:n.otherProps[r]=e[r]})),n}((0,a.Z)(e,m)),o=s.systemProps,i=s.otherProps;return n=Array.isArray(r)?[o].concat((0,c.Z)(r)):"function"===typeof r?function(){var e=r.apply(void 0,arguments);return(0,l.P)(e)?(0,t.Z)({},o,e):o}:(0,t.Z)({},o,r),(0,t.Z)({},i,{sx:n})}var h=r(886),f=r(184),g=["className","component"];var x=r(5902),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.defaultTheme,r=e.defaultClassName,c=void 0===r?"MuiBox-root":r,l=e.generateClassName,d=e.styleFunctionSx,m=void 0===d?u.Z:d,x=(0,i.ZP)("div")(m),v=s.forwardRef((function(e,r){var s=(0,h.Z)(n),i=p(e),u=i.className,d=i.component,m=void 0===d?"div":d,v=(0,a.Z)(i,g);return(0,f.jsx)(x,(0,t.Z)({as:m,ref:r,className:(0,o.Z)(u,l?l(c):c),theme:s},v))}));return v}({defaultTheme:(0,r(7107).Z)(),defaultClassName:"MuiBox-root",generateClassName:x.Z.generate}),w=v},6646:function(){},3824:function(){}}]);
//# sourceMappingURL=464.5d6f19b2.chunk.js.map